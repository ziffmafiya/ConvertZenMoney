# Универсальный Финансовый Отчет

Это веб-приложение представляет собой интерактивную панель для анализа личных финансов. Оно позволяет загружать CSV-файл с данными о транзакциях, визуализировать структуру доходов и расходов, получать рекомендации по оптимизации бюджета с помощью искусственного интеллекта, а также прогнозировать будущие расходы.

## Возможности

*   **Загрузка CSV**: Простая загрузка и обработка вашего CSV-файла с финансовыми данными.
*   **Фильтрация данных**:
    *   **Исключение "Долгов"**: Возможность исключить транзакции, связанные с долговыми счетами.
    *   **Фильтр по дате**: Фильтрация данных по конкретному месяцу и/или году.
*   **Финансовая сводка**: Автоматический расчет и отображение общего дохода, общих расходов и чистого баланса.
*   **Визуализация расходов**:
    *   **По категориям**: Интерактивная кольцевая диаграмма, показывающая распределение расходов по категориям.
    *   **По магазинам**: Горизонтальная столбчатая диаграмма с топ-10 тратами по магазинам и сервисам.
*   **Анализ доходов**: Наглядное отображение источников дохода и их долей в общей сумме.
*   **AI-рекомендации**: Интеграция с Google Gemini API для получения персонализированных советов по улучшению вашего финансового положения на основе анализа данных.
*   **Прогнозирование расходов**: Использование модели Prophet (от Facebook) для прогнозирования будущих расходов на основе исторических данных и отображение результата в виде графика.

## Как использовать

1.  **Разверните приложение на Vercel**: Следуйте инструкциям в разделе "Развертывание на Vercel".
2.  **Откройте приложение**: После успешного развертывания откройте URL вашего приложения в веб-браузере.
3.  **Введите API-ключ (опционально)**: Если вы хотите получить рекомендации от AI, вставьте ваш API-ключ для Google Gemini в соответствующее поле.
4.  **Выберите CSV-файл**: Нажмите на кнопку выбора файла и загрузите ваш CSV-файл с транзакциями.
    *   **Формат CSV**: Убедитесь, что ваш файл использует точку с запятой (`;`) в качестве разделителя и содержит заголовки, соответствующие формату экспорта из приложения [ZenMoney](https://zenmoney.ru/). Пример необходимых заголовков: `date;categoryName;payee;comment;outcomeAccountName;outcome;outcomeCurrencyShortTitle;incomeAccountName;income;incomeCurrencyShortTitle;createdDate;changedDate;qrCode`.
5.  **Примените фильтры (опционально)**:
    *   Установите флажок "Исключить 'Долги'", чтобы убрать долговые операции.
    *   Выберите месяц и/или введите год для анализа конкретного периода.
6.  **Запустите анализ**: Нажмите кнопку "Анализировать".
7.  **Сгенерируйте прогноз**: После анализа данных нажмите кнопку "Сгенерировать прогноз" в разделе "Прогнозирование будущих расходов", чтобы увидеть график будущих трат.
8.  **Изучите отчет**: Просмотрите сводку, диаграммы, рекомендации и прогноз на панели.

## Структура проекта

*   `index.html`: Основной файл, содержащий всю структуру, стили (Tailwind CSS) и логику (JavaScript).
*   `api/upload-transactions.js`: Serverless Function для загрузки транзакций (Node.js).
*   `api/forecast/index.py`: Serverless Function для прогнозирования расходов с помощью Prophet (Python).
*   `api/forecast/requirements.txt`: Зависимости Python для функции прогнозирования.
*   `api/forecast/Dockerfile`: Dockerfile для сборки Serverless Function Prophet.
*   `vercel.json`: Конфигурация Vercel для развертывания проекта, включая Docker Image для функции прогнозирования.
*   `README.md`: Этот файл.

## Используемые технологии

*   HTML5
*   [Tailwind CSS](https://tailwindcss.com/)
*   JavaScript (ES6+)
*   [Chart.js](https://www.chartjs.org/)
*   [Google Gemini API](https://ai.google.dev/) (используемая модель: `gemini-2.5-flash`)
*   [Prophet (Facebook)](https://facebook.github.io/prophet/)
*   [Pandas](https://pandas.pydata.org/)
*   [Matplotlib](https://matplotlib.org/)
*   [Vercel](https://vercel.com/) (с использованием Docker Images для Python Serverless Functions)

## Развертывание на Vercel

Для развертывания этого проекта на Vercel выполните следующие шаги:

1.  **Установите Vercel CLI (если еще не установлен):**
    ```bash
    npm install -g vercel
    ```
2.  **Войдите в Vercel:**
    ```bash
    vercel login
    ```
    Следуйте инструкциям в браузере для авторизации.
3.  **Разверните проект:**
    Перейдите в корневую директорию проекта (`Converter`) в терминале и выполните:
    ```bash
    vercel
    ```
    Vercel CLI обнаружит `vercel.json` и `Dockerfile` и автоматически развернет ваш проект, включая Serverless Function на Python с Docker Image.
4.  **Получите URL:** После успешного развертывания Vercel предоставит вам URL вашего приложения.
