'use strict';

var mean = require('ml-array-mean');

function _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }

var mean__default = /*#__PURE__*/_interopDefaultLegacy(mean);

/**
 *
 * @param {object} points
 * @param {Array<number>} points.x
 * @param {Array<number>} points.y
 * @param {object} [options]
 * @param {boolean} [options.unbiased = true] - if true, divide by (n-1); if false, divide by n.
 * @return {number}
 */
function covariance(points, options = {}) {
  const { x, y } = points;
  const { unbiased = true } = options;

  const meanX = mean__default['default'](x);
  const meanY = mean__default['default'](y);

  let error = 0;

  for (let i = 0; i < x.length; i++) {
    error += (x[i] - meanX) * (y[i] - meanY);
  }

  if (unbiased) {
    return error / (x.length - 1);
  } else {
    return error / x.length;
  }
}

module.exports = covariance;
