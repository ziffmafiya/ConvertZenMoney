# üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–π

## üìã –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

‚úÖ **Heatmap (–¢–µ–ø–ª–æ–≤–∞—è –∫–∞—Ä—Ç–∞)**
- –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —Ç—Ä–∞—Ç –ø–æ –¥–Ω—è–º/—á–∞—Å–∞–º –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
- –ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å —Ü–≤–µ—Ç–∞ = —Å—É–º–º–∞ —Ç—Ä–∞—Ç
- –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏

‚úÖ **Treemap (–î—Ä–µ–≤–æ–≤–∏–¥–Ω–∞—è –∫–∞—Ä—Ç–∞)**
- –ò–µ—Ä–∞—Ä—Ö–∏—è: –∫–∞—Ç–µ–≥–æ—Ä–∏—è ‚Üí –∫–ª–∞—Å—Ç–µ—Ä/–ø—Ä–∏–≤—ã—á–∫–∞
- –†–∞–∑–º–µ—Ä –±–ª–æ–∫–∞ = —Å—É–º–º–∞ —Ç—Ä–∞—Ç
- –¶–≤–µ—Ç = —Ç—Ä–µ–Ω–¥ (–∫—Ä–∞—Å–Ω—ã–π = —Ä–æ—Å—Ç, –∑–µ–ª–µ–Ω—ã–π = –ø–∞–¥–µ–Ω–∏–µ)

## üõ†Ô∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
npm install
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env.local`:
```env
SUPABASE_URL=your-supabase-url
SUPABASE_ANON_KEY=your-supabase-anon-key
```

### 3. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
```bash
npm start
```

### 4. –û—Ç–∫—Ä—ã—Ç–∏–µ –¥–µ–º–æ-—Å—Ç—Ä–∞–Ω–∏—Ü—ã
–û—Ç–∫—Ä–æ–π—Ç–µ `visualization-demo.html` –≤ –±—Ä–∞—É–∑–µ—Ä–µ

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```bash
node test-visualizations.js
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ API (—Ç—Ä–µ–±—É–µ—Ç –∑–∞–ø—É—â–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä)
```bash
# Heatmap API
curl "http://localhost:3000/api/visualization-data?type=heatmap&month=12&year=2024&groupBy=day"

# Treemap API
curl "http://localhost:3000/api/visualization-data?type=treemap&month=12&year=2024&hierarchyType=cluster"
```

## üìä –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–¥–µ

### –ë–∞–∑–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä
```javascript
import { getHeatmapData, getTreemapData, createHeatmap, createTreemap } from './api/visualization-unified.js';

// –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
const heatmapData = await getHeatmapData(12, 2024, 'day');
const treemapData = await getTreemapData(12, 2024, 'cluster');

// –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–π
createHeatmap('heatmapCanvas', heatmapData);
createTreemap('treemapCanvas', treemapData);
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã API

**Heatmap:**
- `month` (1-12): –º–µ—Å—è—Ü
- `year`: –≥–æ–¥
- `groupBy`: `'day'` –∏–ª–∏ `'hour'`

**Treemap:**
- `month` (1-12): –º–µ—Å—è—Ü
- `year`: –≥–æ–¥
- `hierarchyType`: `'cluster'` –∏–ª–∏ `'habit'`

## üé® –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–Ω–µ—à–Ω–µ–≥–æ –≤–∏–¥–∞

### –¶–≤–µ—Ç–∞ Heatmap
- –ì—Ä–∞–¥–∏–µ–Ω—Ç –æ—Ç —Å–≤–µ—Ç–ª–æ-–∂–µ–ª—Ç–æ–≥–æ –¥–æ —Ç–µ–º–Ω–æ-–∫—Ä–∞—Å–Ω–æ–≥–æ
- –ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Å—É–º–º—ã —Ç—Ä–∞—Ç

### –¶–≤–µ—Ç–∞ Treemap
- üî¥ –ö—Ä–∞—Å–Ω—ã–π: —Ä–æ—Å—Ç —Ç—Ä–∞—Ç (>10%)
- üü° –°–≤–µ—Ç–ª–æ-–∫—Ä–∞—Å–Ω—ã–π: –Ω–µ–±–æ–ª—å—à–æ–π —Ä–æ—Å—Ç (0-10%)
- ‚ö™ –°–µ—Ä—ã–π: –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- üü¢ –°–≤–µ—Ç–ª–æ-–∑–µ–ª–µ–Ω—ã–π: –Ω–µ–±–æ–ª—å—à–æ–µ –ø–∞–¥–µ–Ω–∏–µ (0-10%)
- üü¢ –ó–µ–ª–µ–Ω—ã–π: —Å–∏–ª—å–Ω–æ–µ –ø–∞–¥–µ–Ω–∏–µ (>10%)

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
api/
‚îî‚îÄ‚îÄ visualization-unified.js # –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–æ–¥—É–ª—å (API + –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏)

visualization-demo.html      # –î–µ–º–æ-—Å—Ç—Ä–∞–Ω–∏—Ü–∞
test-visualizations.js       # –¢–µ—Å—Ç—ã
VISUALIZATION_README.md      # –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
QUICK_START.md              # –≠—Ç–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
```

## üö® –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –û—à–∏–±–∫–∞ "Supabase URL or Anon Key not configured"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª `.env.local`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω—ã

### –û—à–∏–±–∫–∞ "Table not found"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ç–∞–±–ª–∏—Ü—ã `transactions` –∏ `transaction_clusters` —Å—É—â–µ—Å—Ç–≤—É—é—Ç
- –ó–∞–ø—É—Å—Ç–∏—Ç–µ SQL —Å–∫—Ä–∏–ø—Ç—ã –∏–∑ –ø–∞–ø–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞

### –ü—É—Å—Ç—ã–µ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ –±–∞–∑–µ
- –ó–∞–ø—É—Å—Ç–∏—Ç–µ `test-visualizations.js` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã: `node test-visualizations.js`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Supabase
4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –æ—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
2. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
3. –≠–∫—Å–ø–æ—Ä—Ç –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–π
4. –ê–Ω–∏–º–∞—Ü–∏–∏ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤
5. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–∏–ø—ã –≥—Ä–∞—Ñ–∏–∫–æ–≤ 